(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dae24c20"],{1462:function(t,a,e){"use strict";function r(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}e.d(a,"a",(function(){return r}))},"2eeb":function(t,a,e){"use strict";var r=e("1c8b"),i=e("5dfd").map,o=e("1ea7"),n=e("ff9c"),s=o("map"),c=n("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2f14":function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));e("b4fb"),e("77ad");var r=e("1462"),i=e("a340"),o=function(){function t(){Object(r["a"])(this,t)}return Object(i["a"])(t,[{key:"queryString",value:function(t){var a="";for(var e in t)a+="".concat(e,"=").concat(t[e],"&");return a.slice(0,-1)}}]),t}(),n=new o},a340:function(t,a,e){"use strict";function r(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}e.d(a,"a",(function(){return i}))},b4fb:function(t,a,e){"use strict";var r=e("1c8b"),i=e("efe2"),o=e("74e7"),n=e("a719"),s=e("3553"),c=e("d88d"),d=e("1bbd"),l=e("1ca1"),u=e("1ea7"),f=e("90fb"),v=e("f594"),p=f("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",h=v>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=u("concat"),C=function(t){if(!n(t))return!1;var a=t[p];return void 0!==a?!!a:o(t)},x=!h||!m;r({target:"Array",proto:!0,forced:x},{concat:function(t){var a,e,r,i,o,n=s(this),u=l(n,0),f=0;for(a=-1,r=arguments.length;a<r;a++)if(o=-1===a?n:arguments[a],C(o)){if(i=c(o.length),f+i>b)throw TypeError(g);for(e=0;e<i;e++,f++)e in o&&d(u,f,o[e])}else{if(f>=b)throw TypeError(g);d(u,f++,o)}return u.length=f,u}})},be7a:function(t,a,e){},cf2a:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}}),e("div",{staticClass:"order-bg"}),e("div",{staticClass:"tab-box"},[e("van-tabs",{staticClass:"tabs-box",attrs:{color:"#5f56ff","line-height":"2px","title-active-color":"#5f56ff"},on:{change:t.toggleorder},model:{value:t.tabIndex,callback:function(a){t.tabIndex=a},expression:"tabIndex"}},t._l(t.tabItems,(function(a,r){return e("van-tab",{key:r,attrs:{title:a.title}},[t.orderDatas.length>0?e("div",t._l(t.orderDatas,(function(a,r){return e("div",{key:r,staticClass:"tab-item"},[e("div",{staticClass:"clearfix tab-item-box"},[e("div",{staticClass:"fl no"},[t._v(t._s(a.orderId))]),e("div",{staticClass:"fr"},[1==a.status?e("div",{staticClass:"text",on:{click:function(e){return t.getproduct(a,r)}}},[t._v("确认收货")]):e("div",{staticClass:"text-box-tab"},[e("div",{staticClass:"finished"},[t._v("已完成")]),e("div",{staticClass:"remove",on:{click:function(e){return t.removeorder(a.orderId,r)}}},[e("van-icon",{attrs:{name:"delete"}})],1)])])]),e("div",{staticClass:"order-box"},[e("div",t._l(a.products,(function(a,r){return e("div",{key:r,staticClass:"clearfix cell-box"},[e("div",{staticClass:"fl pro-img"},[e("img",{staticClass:"auto-img",attrs:{src:a.smallImg,alt:""}})]),e("div",{staticClass:"fl pro-info"},[e("div",{staticClass:"text-box"},[e("div",{staticClass:"clearfix"},[e("div",{staticClass:"fl text-name"},[t._v(t._s(a.name))]),e("div",{staticClass:"fl text-rule"},[t._v(t._s(a.rule))])]),e("div",{staticClass:"text-enname"},[t._v(t._s(a.enname))])]),e("div",{staticClass:"price-box"},[e("div",{staticClass:"fl price"},[t._v("￥"+t._s(a.price))]),e("div",{staticClass:"fr count"},[t._v("x"+t._s(a.count))])])])])})),0),e("div",{staticClass:"pro-box"},[e("div",{staticClass:"pro-boxing"},[e("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(a.date,"yyyy-MM-dd hh:mm:ss")))]),e("div",{staticClass:"clearfix"},[e("div",{staticClass:"fl pro-count"},[t._v("共计 "+t._s(a.count)+" 件商品")]),e("div",{staticClass:"fr pro-total"},[t._v("合计 ￥"+t._s(a.total))])])])])])])})),0):e("div",[e("van-empty",{attrs:{description:"订单数据空空如也，去逛一逛!"}},[e("van-button",{staticClass:"bottom-button",attrs:{round:"",color:"#5f56ff"},on:{click:t.goMenu}},[t._v(" 去逛一逛 ")])],1)],1)])})),1)],1)],1)},i=[],o=(e("2eeb"),e("ea69"),e("be7a"),e("2f14")),n={data:function(){return{tabIndex:0,orderDatas:[],tabItems:[{title:"全部"},{title:"进行中"},{title:"已完成"}]}},created:function(){this.getorderdata(0)},methods:{back:function(){this.$router.go(-1)},goMenu:function(){this.$router.push({name:"Menu"})},getorderdata:function(t){var a=this,e=localStorage.getItem("CSTK");e&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:e,status:t}}).then((function(t){if(a.orderDatas=[],a.$toast.clear(),7e4==t.data.code){var e={};for(var r in t.data.result.map((function(t){e[t.oid]?(e[t.oid].count+=t.count,e[t.oid].total+=t.count*t.price,e[t.oid].products.push(t)):e[t.oid]={orderId:t.oid,date:t.createdAt,count:t.count,total:t.count*t.price,products:[t],status:t.status}})),e)a.orderDatas.push(e[r]);a.orderDatas.sort((function(t,a){return new Date(a.date).getTime()-new Date(t.date).getTime()}))}})).catch((function(t){a.$toast.clear()})))},toggleorder:function(t){this.getorderdata(t)},getproduct:function(t,a){var e=this,r=localStorage.getItem("CSTK");if(r){var i=o["a"].queryString({appkey:this.appkey,tokenString:r,oid:t.orderId});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/receive",data:i}).then((function(r){e.$toast.clear(),8e4==r.data.code&&(e.$toast(r.data.msg),1==e.tabIndex?e.orderDatas.splice(a,1):t.status=2)})).catch((function(t){e.$toast.clear()}))}},removeorder:function(t,a){var e=this,r=localStorage.getItem("CSTK");if(r){var i=o["a"].queryString({appkey:this.appkey,tokenString:r,oid:t});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/removeOrder",data:i}).then((function(t){e.$toast.clear(),9e4==t.data.code&&(e.$toast(t.data.msg),e.orderDatas.splice(a,1))})).catch((function(t){e.$toast.clear()}))}}}},s=n,c=e("9ca4"),d=Object(c["a"])(s,r,i,!1,null,null,null);a["default"]=d.exports},ea69:function(t,a,e){"use strict";var r=e("1c8b"),i=e("e1d6"),o=e("3da3"),n=e("d88d"),s=e("3553"),c=e("1ca1"),d=e("1bbd"),l=e("1ea7"),u=e("ff9c"),f=l("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,a){var e,r,l,u,f,v,m=s(this),C=n(m.length),x=i(t,C),y=arguments.length;if(0===y?e=r=0:1===y?(e=0,r=C-x):(e=y-2,r=b(p(o(a),0),C-x)),C+e-r>g)throw TypeError(h);for(l=c(m,r),u=0;u<r;u++)f=x+u,f in m&&d(l,u,m[f]);if(l.length=r,e<r){for(u=x;u<C-r;u++)f=u+r,v=u+e,f in m?m[v]=m[f]:delete m[v];for(u=C;u>C-r+e;u--)delete m[u-1]}else if(e>r)for(u=C-r;u>x;u--)f=u+r-1,v=u+e-1,f in m?m[v]=m[f]:delete m[v];for(u=0;u<e;u++)m[u+x]=arguments[u+2];return m.length=C-r+e,l}})}}]);
//# sourceMappingURL=chunk-dae24c20.0cfda47d.js.map